---
title: Extension
description: Install, Load, create, update PostgreSQL extensions
icon: Blocks
---

There are unparalleled **421+** extensions available in Pigsty for 10 mainstream [Linux distros](/docs/prepare/linux).

------

## Quick Start

You can describe extensions in the [**config inventory**](/docs/setup/config/), and pigsty will download, install, configure, and enable extensions for you.
This example makes `postgis`, `pgvector`, `timescaledb` out-of-the-box:

```yaml
all:
  children:
    pg-meta:
      hosts: {10.10.10.10: { pg_seq: 1, pg_role: primary }}
      vars:
        pg_cluster: pg-meta
        pg_databases: {name: meta, extensions: [ postgis, vector ]} # create (in database)
        pg_extensions: [ postgis, pgvector ]                        # install (in cluster)
  vars:
    repo_extra_packages: [ postgis, timescaledb, vector ]           # download  (globally)
```

When you init this postgres cluster, these extensions will be downloaded to the local repo,
And it will be automatically installed, preloaded, and enabled in the `pg-meta` cluster.

Here's a more complicated example: launch Postgres with required extensions for [self-hosting supabase](/docs/app/supabase):

```yaml
all:
  children:
    pg-meta:
      hosts: { 10.10.10.10: { pg_seq: 1, pg_role: primary } }
      vars:
        pg_cluster: pg-meta
        pg_databases:
          - name: postgres
            baseline: supabase.sql
            schemas: [ extensions ,auth ,realtime ,storage ,graphql_public ,supabase_functions ,_analytics ,_realtime ]
            extensions:                                 # Extensions to enable in the postgres database
              - { name: pgcrypto  ,schema: extensions } # Encryption functions
              - { name: pg_net    ,schema: extensions } # Asynchronous HTTP
              - { name: pgjwt     ,schema: extensions } # JSON Web Token API for PostgreSQL
              - { name: uuid-ossp ,schema: extensions } # Generate universally unique identifiers (UUIDs)
              - { name: pgsodium        }               # Modern cryptography for PostgreSQL
              - { name: supabase_vault  }               # Supabase Vault extension
              - { name: pg_graphql      }               # GraphQL support
              - { name: pg_jsonschema   }               # JSON schema validation
              - { name: wrappers        }               # Collection of foreign data wrappers
              - { name: http            }               # Web page retrieval within the database
              - { name: pg_cron         }               # Job scheduler for PostgreSQL
              - { name: timescaledb     }               # Time-series data support
              - { name: pg_tle          }               # Trusted Language Extensions for PostgreSQL
              - { name: vector          }               # Vector similarity search
              - { name: pgmq            }               # Lightweight message queue
        # supabase required extensions for loading
        pg_libs: 'timescaledb, plpgsql, plpgsql_check, pg_cron, pg_net, pg_stat_statements, auto_explain, pg_tle, plan_filter'
        pg_parameters:
          cron.database_name: postgres
          pgsodium.enable_event_trigger: off
  vars:
    pg_version: 17
    repo_extra_packages: [pg17-core ,pg17-time ,pg17-gis ,pg17-rag ,pg17-fts ,pg17-olap ,pg17-feat ,pg17-lang ,pg17-type ,pg17-util ,pg17-func ,pg17-admin ,pg17-stat ,pg17-sec ,pg17-fdw ,pg17-sim ,pg17-etl ]
    pg_extensions:                  [pg17-time ,pg17-gis ,pg17-rag ,pg17-fts ,pg17-feat ,pg17-lang ,pg17-type ,pg17-util ,pg17-func ,pg17-admin ,pg17-stat ,pg17-sec ,pg17-fdw ,pg17-sim ,pg17-etl ] #,pg17-olap]
```

All available extensions for PG 17 are downloaded and installed, and required one are loaded & enabled.



--------

## Overview

It takes 4 steps to deliver an extension: [**downloads**](/ext/usage/download/), [**installs**](/ext/usage/install/), dynamically [**loads**](/ext/usage/load/), and [**enables**](/ext/usage/create/):

import {Step, Steps} from 'fumadocs-ui/components/steps';

<Steps>
    <Step>

        [**Download**](#download-extension) : Which extension packages to download

        ```yaml tab="config" title="define which extensions to be downloaded"
        repo_extra_packages: [ postgis, timescaledb, vector ]
        ```
        ```bash tab="apply" title="download package"
        make repo
        ```

    </Step>
    <Step>
        [Install](#install-extension) : Which extensions to be installed

        ```yaml tab="config"
        pg_extensions: [ postgis, pgvector, timescaledb ]
        ```
        ```bash tab="apply"
        ./pgsql.yml -t pg_ext     # install extensions
        ```

    </Step>

    <Step>
        [**Load**](#load-extension) : Which extensions to be pre-loaded

        ```yaml tab="config"
        pg_libs: 'timescaledb, pg_stat_statements, auto_explain'  # add extension to preload libraries (not all extensions need this)
        ```
        ```bash tab="apply" title="edit existing cluster config and reload"
        pg edit-config --force -p shared_preload_libraries='timescaledb, pg_stat_statements, auto_explain'
        ```


    </Step>
    <Step>

        [**Create**](#create-extension) : Create extension in the [database](/docs/pgsql/database)

        ```yaml tab="config"
        pg_databases:
          - { name: meta ,extensions: [ postgis, timescaledb, vector ] }
        ```
        ```sql tab="apply" title="create extension in existing database"
        CREATE EXTENSION postgis CASCADE;
        ```
    </Step>


</Steps>



------

## Package Alias

Mange extensions and packages are not that simple, here are two common extension examples:

![](/img/pigsty/ext-mapping.png)

| Entity        | Example `pgvector`                       | Example `postgis`...                                       |
|---------------|------------------------------------------|------------------------------------------------------------|
| **Extension** | `vector`                                 | `postgis`, `postgis_topology`, `postgis_raster`,...        |
| **Package**   | `pgvector`                               | `postgis`                                                  |
| **OS PKG**    | pgvector_17                              | postgresql-16-postgis-3                                    |
| **RPM/DEB**   | pgvector_17_0.8.0-1PGDG.rhel8.x86_64.rpm | postgresql-17-postgis-3_3.5.2+dfsg-1.pgdg22.04+1_amd64.deb |

To install the right RPM / DEB with minimal effort, we need to use the abstract layer: **package alias**.
So you can install these extensions by specifying the "Normalized" names, like `pgvector` or `postgis`.
Without knowing any details about PG & OS version, Arch, Extension versions, and any other details.

Package alias `pkg` are used for extension download & install, but you'll have to use the extension name `ext` when `CREATE EXTENSION` in the database (like the `vector` in `meta` database).
And beware some extensions require explicit preloading, like the `timescaledb` in the above example.

Besides, all the extensions are categorized into 16 major categories, we also have alias for the entire extension category
so that you can download and install them in batch, such as:

```yaml title="replace 17 with 16,15,14,13,..."
repo_extra_packages: [ pg17-main ,pg17-core ,pg17-time ,pg17-gis ,pg17-rag ,pg17-fts ,pg17-olap ,pg17-feat ,pg17-lang ,pg17-type ,pg17-util ,pg17-func ,pg17-admin ,pg17-stat ,pg17-sec ,pg17-fdw ,pg17-sim ,pg17-etl]
pg_extensions: [pg17-time ,pg17-gis ,pg17-rag ,pg17-fts ,pg17-feat ,pg17-lang ,pg17-type ,pg17-util ,pg17-func ,pg17-admin ,pg17-stat ,pg17-sec ,pg17-fdw ,pg17-sim ,pg17-etl ] #,pg17-olap]
```

All extensions **CAN** be installed simultaneously, except the `olap` category, where `citus` conflict with `hydra`, and `pg_duckdb` conflict with `pg_mooncake`.
So you can download them all, but install one at a time.




------

## Complex Example

Here’s a concrete example: the [`app/supa`](/docs/conf/supa/) configuration template used to build [**Supabase**](https://supabase.com/):

Supabase is an “open source Firebase alternative” built on PostgreSQL that heavily uses extensions. The following snippet defines the extensions needed by Supabase:


In this example, we declare a PostgreSQL cluster named `pg-meta` with the following extension configuration:

- `repo_extra_packages`: Batch download all available extensions by 16 major categories
- `pg_extensions`: Install all extension packages except for `pg17-olap`
- `pg_libs`: Dynamically load the extensions required by Supabase
- `pg_parameters`: Set configuration parameters needed by extensions (e.g., `pgsodium` and `pg_cron`)
- `pg_databases.extensions`: Specify which extensions to enable and in which schema

The `baseline: supabase.sql` includes additional SQL migration logic for custom extension configuration.

By simply executing `./install.yml`, users get a fully configured PostgreSQL cluster with all the extensions Supabase requires, ready to use out of the box!